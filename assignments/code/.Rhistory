# setwd("~/Documents/AQM2")
# ============================================================
# Assignment 3: Binary Outcomes
# Applied Quantitative Methods II, UC3M
# ============================================================
# List of packages
library(dplyr)
library(broom)
library(ggplot2)
library(modelsummary)
library(marginaleffects)
# ============================================================
# Part 1: ANES Voter Turnout
# ============================================================
# --------
## 1. Setup and data preparation
# a)
raw = read.csv("https://raw.githubusercontent.com/franvillamil/AQM2/refs/heads/master/datasets/anes/anes_timeseries_2020.csv")
head(raw)
str(raw)
df = raw %>%
mutate(
voted = ifelse(V202109x < 0, NA, V202109x),
age = ifelse(V201507x < 0, NA, V201507x),
female = case_when(
V201600 == 2 ~ 1,
V201600 == 1 ~ 0,
TRUE ~ NA_real_),
education = case_when(
V201511x == 1 ~ 10, V201511x == 2 ~ 12, V201511x == 3 ~ 14,
V201511x == 4 ~ 16, V201511x == 5 ~ 20, TRUE ~ NA_real_),
income = ifelse(V201617x < 0, NA, V201617x),
party_id = ifelse(V201231x < 0, NA, V201231x)
)
# b)
summary(df)
df = raw %>%
transmute(
voted = ifelse(V202109x < 0, NA, V202109x),
age = ifelse(V201507x < 0, NA, V201507x),
female = case_when(
V201600 == 2 ~ 1,
V201600 == 1 ~ 0,
TRUE ~ NA_real_),
education = case_when(
V201511x == 1 ~ 10, V201511x == 2 ~ 12, V201511x == 3 ~ 14,
V201511x == 4 ~ 16, V201511x == 5 ~ 20, TRUE ~ NA_real_),
income = ifelse(V201617x < 0, NA, V201617x),
party_id = ifelse(V201231x < 0, NA, V201231x)
)
# b)
summary(df)
nrow(df)
df = raw %>%
transmute(
voted = ifelse(V202109x < 0, NA, V202109x),
age = ifelse(V201507x < 0, NA, V201507x),
female = case_when(
V201600 == 2 ~ 1,
V201600 == 1 ~ 0,
TRUE ~ NA),
education = case_when(
V201511x == 1 ~ 10, V201511x == 2 ~ 12, V201511x == 3 ~ 14,
V201511x == 4 ~ 16, V201511x == 5 ~ 20, TRUE ~ NA),
income = ifelse(V201617x < 0, NA, V201617x),
party_id = ifelse(V201231x < 0, NA, V201231x)
)
class(NA_character_)
class(NA_real_)
class(NA)
# c)
mean(df$voted)
# c)
mean(df$voted, na.rm = TRUE)
